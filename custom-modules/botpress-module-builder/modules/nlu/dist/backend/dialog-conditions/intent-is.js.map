{"version":3,"sources":["dialog-conditions/intent-is.ts"],"names":["id","label","description","callback","displayOrder","params","intentName","type","editor","module","component","evaluate","event","topicName","oosConfidence","_","get","topicConf","topicIntents","intentConf","find","x"],"mappings":";;;;;;;AACA;;;;eAEe;AACbA,EAAAA,EAAE,EAAE,gBADS;AAEbC,EAAAA,KAAK,EAAE,8BAFM;AAGbC,EAAAA,WAAW,EAAG,sCAHD;AAIbC,EAAAA,QAAQ,EAAE,kCAJG;AAKbC,EAAAA,YAAY,EAAE,CALD;AAMbC,EAAAA,MAAM,EAAE;AACNC,IAAAA,UAAU,EAAE;AAAEL,MAAAA,KAAK,EAAE,gBAAT;AAA2BM,MAAAA,IAAI,EAAE;AAAjC;AADN,GANK;AASbC,EAAAA,MAAM,EAAE;AACNC,IAAAA,MAAM,EAAE,KADF;AAENC,IAAAA,SAAS,EAAE;AAFL,GATK;AAabC,EAAAA,QAAQ,EAAE,CAACC,KAAD,EAAQ;AAAEN,IAAAA,UAAF;AAAcO,IAAAA;AAAd,GAAR,KAAsC;AAC9C,UAAMC,aAAa,GAAGC,gBAAEC,GAAF,CAAMJ,KAAN,EAAc,gCAAd,EAA+C,CAA/C,CAAtB;;AACA,UAAMK,SAAS,GAAGF,gBAAEC,GAAF,CAAMJ,KAAN,EAAc,mBAAkBC,SAAU,aAA1C,EAAwD,CAAxD,CAAlB;;AACA,UAAMK,YAAY,GAAGH,gBAAEC,GAAF,CAAMJ,KAAN,EAAc,mBAAkBC,SAAU,UAA1C,EAAqD,EAArD,CAArB;;AACA,UAAMM,UAAU,GAAGJ,gBAAEC,GAAF,CACjBE,YAAY,CAACE,IAAb,CAAkBC,CAAC,IAAIA,CAAC,CAACpB,KAAF,KAAYK,UAAnC,CADiB,EAEjB,YAFiB,EAGjB,CAHiB,CAAnB;;AAKA,WAAOW,SAAS,GAAGE,UAAZ,IAA0B,IAAIL,aAA9B,CAAP;AACD;AAvBY,C","sourceRoot":"/src/modules/nlu/src/backend","sourcesContent":["import { Condition } from 'botpress/sdk'\nimport _ from 'lodash'\n\nexport default {\n  id: 'user_intent_is',\n  label: 'User asks something (intent)',\n  description: `The user's intention is {intentName}`,\n  callback: '/mod/nlu/condition/intentChanged',\n  displayOrder: 0,\n  params: {\n    intentName: { label: 'Name of intent', type: 'string' }\n  },\n  editor: {\n    module: 'nlu',\n    component: 'LiteEditor'\n  },\n  evaluate: (event, { intentName, topicName }) => {\n    const oosConfidence = _.get(event, `nlu.predictions.oos.confidence`, 0)\n    const topicConf = _.get(event, `nlu.predictions.${topicName}.confidence`, 0)\n    const topicIntents = _.get(event, `nlu.predictions.${topicName}.intents`, [])\n    const intentConf = _.get(\n      topicIntents.find(x => x.label === intentName),\n      'confidence',\n      0\n    )\n    return topicConf * intentConf * (1 - oosConfidence)\n  }\n} as Condition\n"]}